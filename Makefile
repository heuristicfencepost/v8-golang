HOME=/home/mersault

include $(GOROOT)/src/Make.inc
TARG=v8
include $(GOROOT)/src/Make.pkg

swig:
	swig -c++ -go v8.i

build: swig
	#gcc callbacks.c
	g++ -c -I$(HOME)/svn/v8/src -L$(HOME)/svn/v8/libv8.so -fpic v8_wrap.cxx
	g++ -shared v8_wrap.o -o v8_go.so
	8g v8.go
	gopack grc v8.8 v8_go.so

# Override default definition of clean from Go build scripts in order to make sure
# we clean up C++ code generated by SWIG as well
clean:
	rm v8_wrap.cxx v8_gc.c v8.go
